\invisiblelocaltableofcontents\label{toc:lecturetoc}
\begingroup
    \parindent 0cm \parfillskip 0cm \leftskip 0cm \rightskip 0cm
    \etocframedstyle[1]{}
    \etocsetstyle{subsection}
                  {}
                  {\leavevmode\leftskip 0cm\relax} {\normalsize\rm\etocname\nobreak\leaders\hbox{.}\hfill\tt p.\makebox[12 pt][r]{\etocpage} \par\noindent}
                  {\vspace{-0.25cm}}
    \tableofcontents\ref{toc:lecturetoc}
\endgroup
\newcounter{lecturecount} % starts at 0 by default
\NewDocumentEnvironment{ lecture } {O{} O{} +b} 
	{\addtocounter{lecturecount}{1} % increase counter
		\phantomsection % invisible marker for hyperref
		\addcontentsline{toc}{subsection}{\textbf{Lecture~\thelecturecount:}~\textsl{#2}} % add to table of contents
		\begin{trivlist} % begin unmarked ("trivial") list
		\item \colorbox{LavenderBlush2}{\textbf{Lecture \thelecturecount.}~(\texttt{#1})~ \textit{#2}} % Header
		\item #3  % +b is for inputs that are long
		\end{trivlist} % end list
	}{}
\newpage